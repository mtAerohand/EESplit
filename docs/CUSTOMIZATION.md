# EESplit カスタマイズ計画

## プロジェクト概要

**EESplit** は、原神の精鋭狩り（Elite Enemy）RTA用にカスタマイズされたタイマーアプリケーションです。

- **ベースプロジェクト**: [LiveSplitOne](https://github.com/LiveSplit/LiveSplitOne)
- **目的**: 原神の精鋭敵討伐タイムアタック専用のタイマー機能を提供

## 改修方針

### 1. LiveSplitOneからの独立
- [x] 独自リポジトリへの移行完了
- [ ] プロジェクト名・ブランディングの変更
- [ ] README.mdの更新

### 2. 原神専用機能の追加
- [ ] 精鋭敵のプリセットリスト
- [ ] 原神マップ統合（オプション）
- [ ] スプリット自動検出（画像認識など）
- [ ] 原神特有のタイム計測機能

### 3. UI/UXの最適化
- [ ] 原神のテーマカラー対応
- [ ] 日本語UIの最適化
- [ ] 精鋭敵アイコンの表示

### 4. パフォーマンス
- [ ] 軽量化（原神と同時起動を想定）
- [ ] リソース使用量の最適化

## 技術スタック

- **フロントエンド**: React + TypeScript
- **デスクトップ**: Tauri
- **コアロジック**: livesplit-core (Rust)

## 実装計画

### フェーズ1: 基盤整備
1. プロジェクト情報の更新
2. ビルド環境の確認
3. 既存機能のテスト

### フェーズ2: 原神専用機能
1. 精鋭敵データベースの作成
2. カスタムスプリット設定
3. UI/テーマのカスタマイズ

### フェーズ3: 最適化・公開
1. パフォーマンスチューニング
2. ドキュメント整備
3. リリースビルド

## 精鋭狩りRTA 要件定義

### 基本仕様

**精鋭狩りとは**: 原神において精鋭（Elite Enemy）に類別される敵を400体倒すまでのタイムアタック

### 追加機能の要件

#### 機能1: 区間ごとに精鋭数を設定する機能

**概要**: 各スプリット（区間）で倒す精鋭の数を設定できる

**詳細化が必要な項目**:

- **設定方法**:
  - [x] UI上で設定（推奨）
  - [ ] 設定ファイル
  - 回答: UI上で設定する

- **区間の定義**:
  - [x] LiveSplitの「スプリット」＝「区間」
  - 回答: Yes

- **精鋭数の扱い**:
  - [x] 事前に予定数のみ設定
  - [ ] 実際に倒した数もカウントする
  - 回答: 事前の予定数のみを設定

- **合計の検証**:
  - [ ] 全区間の精鋭数合計を400体にチェック/警告
  - [x] チェックしない
  - 回答: チェックはしないが、全区間の精鋭数合計を表示する機能は必要

---

#### 機能2: 区間ごとに精鋭一体あたりの平均討伐秒数の算出と表示

**概要**: 各区間で精鋭1体を倒すのにかかっている平均秒数を計算・表示

**詳細化が必要な項目**:

- **計算式**:
  - [x] `区間タイム ÷ 設定した精鋭数`
  - [ ] その他:
  - 回答: OK

- **表示タイミング**:
  - [ ] リアルタイム表示（区間進行中も更新）
  - [x] 区間終了後のみ
  - 回答: 区間終了後のみ表示

- **表示場所**:
  - [x] 各区間の行に追加列として表示
  - [ ] 別ウィンドウ/パネル
  - [ ] その他:
  - 回答: 追加列として表示

- **比較表示**:
  - [ ] ベストタイムの平均秒数も表示
  - [ ] デルタ（差分）も表示（例：ベストより+1.2秒/体）
  - [x] 表示しない
  - 回答: いったん今回は表示しない

---

#### 機能3: 討伐の平均秒数が悪い区間の行の色を変える

**概要**: パフォーマンスが悪い区間を視覚的に識別できるようにする

**詳細化が必要な項目**:

- **閾値オプション**:
  1. 下位n%
  2. 下位n位
  3. 討伐平均秒数
  - [x] 排他的（1つだけ選択）
  - [ ] 複数同時適用可能
  - 回答: 排他的（1つだけ選択）

- **閾値の設定方法**:
  - [x] UI/設定画面で設定
  - [ ] 設定ファイル
  - 回答: UI/設定画面で設定

- **色の種類**:
  - 悪い区間の色:
  - [ ] カスタマイズ可能
  - [x] 固定色
  - 回答: 固定色

- **判定基準の詳細**:
  - **下位n%**:
    - [x] 現在のラン内の全区間中の下位n%
    - [ ] 過去のベストランと比較
    - 回答: 現在のラン内で判定

  - **下位n位**:
    - [x] 現在のラン内で下位n位
    - [ ] 過去のベストランと比較
    - 回答: 現在のラン内で判定

  - **討伐平均秒数**:
    - [x] 絶対値（例：10秒/体以上）
    - [ ] ベストとの差分（例：ベストより+2秒/体以上）
    - 回答: 絶対値で判定（今回の記録がどうか、でよい）

---

### 追加で検討する機能

#### データ管理

- **実績カウント**:
  - [x] 実際に倒した精鋭数をカウントする機能が必要
  - [ ] 不要
  - 回答: 画面キャプチャで正確に表示とかは不要。区間に設定された精鋭数から完了した区間の精鋭数の合計をリアルタイムで表示する。「現在の合計/全区間の合計」として表示

- **精鋭の種類**:
  - [ ] 敵の種類（ヒルチャール、アビス魔術師など）を区別
  - [x] 区別しない
  - 回答: 区別しない

- **履歴管理**:
  - [x] 過去のランの記録を保存・比較
  - [ ] 不要
  - 回答: 標準の保存機能を今回の改修に合わせて改修して使う

#### UI/UX

- **合計表示**:
  - [x] 現在までに倒した精鋭数の合計表示（例：「125/400体」）
  - [ ] 不要
  - 回答: Yes（実装する）

- **ペース表示**:
  - [ ] 「このペースだと最終タイムは○分」のような予測表示
  - [ ] 不要
  - 回答: あってもいいかも。将来の追加要素として検討

- **到達判定**:
  - [ ] 400体達成時の特別な表示/通知
  - [x] 不要
  - 回答: 不要

#### インポート/エクスポート

- **ルート設定の保存**:
  - [x] 区間名・精鋭数のセットを保存して使い回す
  - [ ] 不要
  - 回答: 特別に追加は必要なく、今ある保存機能を今回の改修に合わせて改修して使用する。シンプルに。

- **共有機能**:
  - [ ] 他のプレイヤーとルート設定を共有
  - [x] 不要
  - 回答: 特別な共有機能は不要。標準の保存/読み込み機能を使用

---

## メモ

- LiveSplitOneの更新を取り込むかどうかは後で検討
